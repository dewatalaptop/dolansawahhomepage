<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Reservasi Dolan Sawah</title>
    <style>
        /* CSS GABUNGAN UNTUK SEMUA HALAMAN */

        /* Gaya Global & Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            text-align: center;
            color: black;
            transition: background 0.5s ease;
        }

        /* --- Tema Latar Belakang --- */
        body.theme-home { background: linear-gradient(135deg, #ff9800, #ffcc80); }
        body.theme-menu { background: linear-gradient(135deg, #ff9800, #e65100); }
        body.theme-gallery { background: linear-gradient(135deg, #f6d365, #fda085); }
        body.theme-jadwal { background: linear-gradient(135deg, #f6d365, #fda085); }
        body.theme-reguler { background: linear-gradient(135deg, #f5f7fa, #c3cfe2); }
        body.theme-reservasi { background: linear-gradient(135deg, #89f7fe, #66a6ff); } /* Tema baru untuk alur reservasi */
        
        /* Kontainer Konten Halaman */
        .page-content {
            display: none; /* Semua halaman disembunyikan secara default */
            padding: 20px;
            animation: fadeIn 0.8s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Tombol Kembali & Navigasi */
        .nav-button {
            display: inline-block;
            background: #ff5722;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            margin-top: 25px;
            border: none;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
        }
        .nav-button:hover { transform: scale(1.05); }
        .nav-button.next { background: #4caf50; }

        /* --- Layar Loading --- */
        .loading-screen {
            position: fixed; width: 100%; height: 100%;
            background: white; display: flex; justify-content: center;
            align-items: center; flex-direction: column; z-index: 2000;
        }
        .loading-bar { width: 80%; max-width: 300px; height: 8px; background: #ddd; border-radius: 5px; overflow: hidden; margin-top: 10px; }
        .loading-fill { width: 0%; height: 100%; background: linear-gradient(90deg, #ff9800, #ff5722); transition: width 0.2s; }
        .loading-text { font-size: 18px; margin-top: 10px; font-weight: bold; color: #ff9800; }

        /* --- Gaya Halaman Utama (Home) --- */
        #page-home .header-gallery { width: 100%; position: fixed; top: 0; left: 0; z-index: 1000; background: white; box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1); }
        #page-home .header-gallery img { width: 100%; height: auto; max-height: 200px; object-fit: cover; }
        #page-home .main-container { max-width: 800px; margin: auto; padding: 220px 20px 50px; background: white; border-radius: 15px; box-shadow: 0px 10px 20px rgba(255, 152, 0, 0.5); }
        #page-home h1 { color: #ff9800; }
        #page-home .button { display: block; width: 90%; max-width: 300px; padding: 14px; margin: 10px auto; font-size: 18px; font-weight: bold; text-decoration: none; color: white; border-radius: 10px; text-align: center; border: none; cursor: pointer; transition: transform 0.3s, opacity 0.3s; }
        #page-home .orange { background: linear-gradient(45deg, #ff9800, #ff5722); }
        #page-home .green { background: linear-gradient(45deg, #4caf50, #8bc34a); }
        #page-home .button:hover { transform: scale(1.05); opacity: 0.9; }
        
        #page-home .floating-button {
            display: block; width: 90%; max-width: 320px; padding: 14px;
            margin: 30px auto 10px; font-size: 18px; font-weight: bold; text-decoration: none;
            color: black; background: linear-gradient(45deg, #ffeb3b, #fbc02d);
            border-radius: 10px; text-align: center; border: none; cursor: pointer;
            box-shadow: 0px 5px 15px rgba(255, 235, 59, 0.7);
            animation: blink-effect 1.5s infinite alternate;
        }
        @keyframes blink-effect {
            from { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.08); }
            to { opacity: 1; transform: scale(1); }
        }

        /* --- Gaya Halaman Menu & Galeri yang Sudah Ada (Tidak diubah) --- */
        #page-menu .container, #page-gallery .container, #page-jadwal .container, #page-reguler .menu-container {
             max-width: 90%; margin: 20px auto; padding: 20px; background: white; border-radius: 15px; box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.15);
        }
        /* (CSS lain yang relevan tetap dipertahankan dari kode asli Anda) */
        
        /* --- [BARU] GAYA HALAMAN RESERVASI --- */
        .reservasi-container {
            max-width: 700px; margin: 20px auto; padding: 25px; background: white;
            border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .reservasi-container h1, .reservasi-container h2 { color: #007BFF; }
        
        /* Kalender */
        #calendar-container { margin-top: 20px; }
        .calendar-header { display: flex; justify-content: space-between; align-items: center; padding: 10px; }
        #calendar-nav { font-size: 24px; font-weight: bold; }
        #calendar-nav button { background: #007BFF; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; }
        .calendar-grid div { padding: 10px; border-radius: 5px; cursor: pointer; transition: background-color 0.3s; }
        .day-name { font-weight: bold; color: #555; }
        .day { border: 1px solid #ddd; }
        .day:hover, .day.selected { background-color: #ff9800; color: white; transform: scale(1.05); }
        .day.disabled { background-color: #f5f5f5; color: #ccc; cursor: not-allowed; }
        
        /* Pilihan Tempat */
        #venue-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 20px; }
        .venue-card { border: 1px solid #ddd; border-radius: 10px; overflow: hidden; cursor: pointer; transition: box-shadow 0.3s, transform 0.3s; }
        .venue-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,0,0,0.12); }
        .venue-card img { width: 100%; height: 150px; object-fit: cover; }
        .venue-card h3 { padding: 10px; margin: 0; color: #333; }
        .venue-card.selected { border: 3px solid #ff9800; }
        
        /* Pilihan Menu (Modifikasi dari page-reguler) */
        #page-menu-selection .menu-item { cursor: pointer; padding: 15px 10px; }
        #page-menu-selection .menu-item input[type="checkbox"] { margin-right: 15px; transform: scale(1.5); }
        
        /* Form Konfirmasi */
        #confirmation-form { text-align: left; max-width: 500px; margin: 20px auto; }
        #confirmation-form label { display: block; margin-top: 15px; font-weight: bold; color: #333; }
        #confirmation-form input, #confirmation-form textarea { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 5px; }
        #summary { background: #f9f9f9; padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 5px solid #007BFF; }
        #summary h3 { margin-bottom: 10px; }
    </style>
</head>

<body class="theme-home">

    <div class="loading-screen">
        <h2>Memuat Halaman...</h2>
        <div class="loading-bar"><div class="loading-fill"></div></div>
        <p class="loading-text">0%</p>
    </div>

    <div id="page-home" class="page-content">
        <div class="header-gallery">
            <img src="http://dolansawah.hexat.com/images/8C2E210D-68C8-4A0A-B2AB-791500EA544A_thumb.jpeg" alt="Gallery Image" />
        </div>
        <div class="main-container">
            <h1>Selamat Datang di Dolan Sawah</h1>
            <p>Jelajahi berbagai menu dan tempat menarik kami.</p>
            
            <a href="#" onclick="startReservation()" class="button orange">Reservasi Online Sekarang</a>

            <a href="#" onclick="showPage('page-reguler')" class="button green">Lihat Menu Reguler</a>
            <a href="#" onclick="showPage('page-menu')" class="button orange">Lihat Menu Paket Prasmanan</a>
            <a href="#" onclick="showPage('page-gallery')" class="button green">Lihat Gallery Lokasi</a>
            <a href="#" onclick="showPage('page-jadwal')" class="button orange">Lihat Jadwal Buka</a>
            
            <a href="https://wa.me/6285601393640?text=Halo%20Admin%20Dolan%20Sawah,%20saya%20mau%20bertanya..." class="floating-button">
                Tanya via WhatsApp
            </a>
        </div>
    </div>
    
    <div id="page-calendar" class="page-content">
        <div class="reservasi-container">
            <h1>Langkah 1: Pilih Tanggal Reservasi</h1>
            <p>Silakan pilih tanggal yang tersedia.</p>
            <div id="calendar-container">
                <div class="calendar-header">
                    <button onclick="changeMonth(-1)">&lt; Prev</button>
                    <h2 id="calendar-month-year"></h2>
                    <button onclick="changeMonth(1)">Next &gt;</button>
                </div>
                <div class="calendar-grid day-names">
                    <div class="day-name">Min</div>
                    <div class="day-name">Sen</div>
                    <div class="day-name">Sel</div>
                    <div class="day-name">Rab</div>
                    <div class="day-name">Kam</div>
                    <div class="day-name">Jum</div>
                    <div class="day-name">Sab</div>
                </div>
                <div id="calendar-days" class="calendar-grid"></div>
            </div>
            <button class="nav-button" onclick="showPage('page-home')">Kembali ke Home</button>
        </div>
    </div>

    <div id="page-venue-selection" class="page-content">
        <div class="reservasi-container">
            <h1>Langkah 2: Pilih Tempat</h1>
            <p>Tempat yang tersedia pada tanggal <b id="selected-date-info"></b>:</p>
            <div id="venue-list">
                </div>
            <button class="nav-button" onclick="showPage('page-calendar')">Kembali Pilih Tanggal</button>
        </div>
    </div>
    
    <div id="page-menu-selection" class="page-content">
        <div class="reservasi-container">
            <h1>Langkah 3: Pilih Menu Anda</h1>
            <p>Centang menu yang ingin Anda pesan.</p>
            
            <div id="menu-options-container">
                 </div>

            <button class="nav-button" onclick="showPage('page-venue-selection')">Kembali Pilih Tempat</button>
            <button class="nav-button next" onclick="processMenuSelection()">Lanjut ke Konfirmasi</button>
        </div>
    </div>

    <div id="page-confirmation" class="page-content">
        <div class="reservasi-container">
            <h1>Langkah 4: Konfirmasi & Data Diri</h1>
            <p>Mohon periksa kembali detail reservasi Anda dan lengkapi data diri.</p>

            <div id="summary">
                <h3>Ringkasan Reservasi</h3>
                <p><strong>Tanggal:</strong> <span id="summary-date"></span></p>
                <p><strong>Tempat:</strong> <span id="summary-venue"></span></p>
                <p><strong>Menu Dipilih:</strong></p>
                <ul id="summary-menu"></ul>
            </div>

            <form id="confirmation-form" onsubmit="event.preventDefault(); generateWhatsAppLink();">
                <label for="name">Nama Lengkap:</label>
                <input type="text" id="name" name="name" required>

                <label for="address">Alamat:</label>
                <input type="text" id="address" name="address" required>

                <label for="pax">Jumlah Peserta:</label>
                <input type="number" id="pax" name="pax" required min="1">
                
                <label for="time">Jam Reservasi:</label>
                <input type="time" id="time" name="time" required>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="nav-button" type="button" onclick="showPage('page-menu-selection')">Kembali Pilih Menu</button>
                    <button class="nav-button next" type="submit">Kirim Reservasi via WhatsApp</button>
                </div>
            </form>
        </div>
    </div>


    <div id="page-reguler" class="page-content"> </div>
    
    <script>
        // --- SCRIPT GABUNGAN UNTUK SEMUA FUNGSI ---

        // Variabel global untuk menyimpan data reservasi
        const reservationData = {
            date: null,
            venue: null,
            venueImage: null,
            menu: [],
            name: '',
            address: '',
            pax: 0,
            time: ''
        };
        
        // Data master untuk tempat (venue)
        const venues = [
            { id: 'joglo', name: 'Pendopo Joglo', image: 'http://dolansawah.hexat.com/images/PILIHAN TEMPAT DI DOLAN SAWAH_page-0001.jpg' },
            { id: 'sawah', name: 'Area Pinggir Sawah', image: 'http://dolansawah.hexat.com/images/PILIHAN TEMPAT DI DOLAN SAWAH_page-0002.jpg' },
            { id: 'lesehan', name: 'Lesehan Bambu', image: 'http://dolansawah.hexat.com/images/PILIHAN TEMPAT DI DOLAN SAWAH_page-0003.jpg' },
            { id: 'taman', name: 'Area Taman', image: 'http://dolansawah.hexat.com/images/PILIHAN TEMPAT DI DOLAN SAWAH_page-0004.jpg' },
            { id: 'vip', name: 'Ruang VIP AC', image: 'http://dolansawah.hexat.com/images/PILIHAN TEMPAT DI DOLAN SAWAH_page-0005.jpg' }
        ];

        // Fungsi utama untuk navigasi halaman
        function showPage(pageId) {
            document.querySelectorAll('.page-content').forEach(page => {
                page.style.display = 'none';
            });
            
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.style.display = 'block';
            }

            // Ganti tema latar belakang
            let theme = 'theme-home'; // default
            if (pageId.includes('reservasi') || pageId.includes('calendar') || pageId.includes('venue') || pageId.includes('confirmation') || pageId.includes('menu-selection')) {
                theme = 'theme-reservasi';
            } else {
                theme = pageId.replace('page-', 'theme-');
            }
            document.body.className = theme;
            
            window.scrollTo(0, 0);
        }

        // --- ALUR RESERVASI BARU ---

        function startReservation() {
            renderCalendar(currentYear, currentMonth);
            showPage('page-calendar');
        }

        // 1. Logika Kalender
        const calendarMonthYear = document.getElementById('calendar-month-year');
        const calendarDays = document.getElementById('calendar-days');
        const today = new Date();
        let currentMonth = today.getMonth();
        let currentYear = today.getFullYear();

        function renderCalendar(year, month) {
            calendarDays.innerHTML = '';
            const firstDayOfMonth = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const monthNames = ["Januari", "Februari", "Maret", "April", "Mei", "Juni", "Juli", "Agustus", "September", "Oktober", "November", "Desember"];
            
            calendarMonthYear.textContent = `${monthNames[month]} ${year}`;

            for (let i = 0; i < firstDayOfMonth; i++) {
                calendarDays.innerHTML += `<div></div>`;
            }

            for (let day = 1; day <= daysInMonth; day++) {
                const cell = document.createElement('div');
                cell.textContent = day;
                cell.classList.add('day');
                
                const currentDate = new Date(year, month, day);
                if (currentDate < today.setHours(0,0,0,0)) {
                    cell.classList.add('disabled');
                } else {
                    cell.onclick = () => selectDate(year, month, day);
                }
                calendarDays.appendChild(cell);
            }
        }

        function changeMonth(delta) {
            currentMonth += delta;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            } else if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            renderCalendar(currentYear, currentMonth);
        }

        function selectDate(year, month, day) {
            reservationData.date = new Date(year, month, day).toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            
            // Simulasi ketersediaan tempat (bisa dikembangkan dengan data real)
            // Contoh: Ruang VIP tidak tersedia di hari Minggu
            const selectedDay = new Date(year, month, day).getDay(); // 0 = Minggu
            const availableVenues = venues.filter(venue => !(venue.id === 'vip' && selectedDay === 0));

            const venueList = document.getElementById('venue-list');
            venueList.innerHTML = '';
            availableVenues.forEach(venue => {
                venueList.innerHTML += `
                    <div class="venue-card" onclick="selectVenue('${venue.id}', '${venue.name}', '${venue.image}')">
                        <img src="${venue.image}" alt="${venue.name}">
                        <h3>${venue.name}</h3>
                    </div>
                `;
            });
            
            document.getElementById('selected-date-info').textContent = reservationData.date;
            showPage('page-venue-selection');
        }

        // 2. Logika Pemilihan Tempat
        function selectVenue(id, name, image) {
            reservationData.venue = name;
            reservationData.venueImage = image; // simpan url gambar
            
            // Salin struktur menu dari #page-reguler ke #page-menu-selection
            const menuSource = document.querySelector("#page-reguler .menu-container").cloneNode(true);
            const menuDestination = document.getElementById("menu-options-container");
            
            // Hapus tombol kembali yg lama
            menuSource.querySelector('.back-button').remove();
            
            // Ubah item menu menjadi item dengan checkbox
            menuSource.querySelectorAll('.menu-item').forEach(item => {
                const itemName = item.querySelector('.item-name').textContent;
                const itemPrice = item.querySelector('.item-price').textContent;
                item.innerHTML = `
                    <label style="display: flex; align-items: center; width: 100%;">
                        <input type="checkbox" class="menu-checkbox" value="${itemName} - ${itemPrice}">
                        <span class="item-name" style="margin-left: 15px;">${itemName}</span>
                        <span class="item-dots"></span>
                        <span class="item-price">${itemPrice}</span>
                    </label>
                `;
            });

            menuDestination.innerHTML = ''; // Kosongkan dulu
            menuDestination.appendChild(menuSource);

            showPage('page-menu-selection');
        }
        
        // 3. Logika Pemilihan Menu
        function processMenuSelection() {
            reservationData.menu = [];
            document.querySelectorAll('#page-menu-selection .menu-checkbox:checked').forEach(checkbox => {
                reservationData.menu.push(checkbox.value);
            });

            if (reservationData.menu.length === 0) {
                alert('Mohon pilih minimal satu menu.');
                return;
            }

            populateConfirmation();
            showPage('page-confirmation');
        }

        // 4. Logika Halaman Konfirmasi
        function populateConfirmation() {
            document.getElementById('summary-date').textContent = reservationData.date;
            document.getElementById('summary-venue').textContent = reservationData.venue;
            
            const menuList = document.getElementById('summary-menu');
            menuList.innerHTML = '';
            reservationData.menu.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                menuList.appendChild(li);
            });
        }
        
        function generateWhatsAppLink() {
            // Ambil data dari form
            reservationData.name = document.getElementById('name').value;
            reservationData.address = document.getElementById('address').value;
            reservationData.pax = document.getElementById('pax').value;
            reservationData.time = document.getElementById('time').value;

            // Format Pesan WhatsApp
            let message = `*--- KONFIRMASI RESERVASI DOLAN SAWAH ---*%0A%0A`;
            message += `Halo Admin, saya ingin melakukan reservasi dengan detail berikut:%0A%0A`;
            message += `*Nama:* ${reservationData.name}%0A`;
            message += `*Alamat:* ${reservationData.address}%0A`;
            message += `*Jumlah Peserta:* ${reservationData.pax} orang%0A%0A`;
            message += `*Tanggal:* ${reservationData.date}%0A`;
            message += `*Jam:* ${reservationData.time}%0A`;
            message += `*Tempat Dipilih:* ${reservationData.venue}%0A%0A`;
            message += `*Pesanan Menu:*%0A`;
            reservationData.menu.forEach(item => {
                message += `- ${item}%0A`;
            });
            message += `%0AAtas nama ${reservationData.name}. Mohon konfirmasi ketersediaannya. Terima kasih.`;
            
            const whatsappNumber = "6285601393640"; // Nomor WA Admin
            const url = `https://wa.me/${whatsappNumber}?text=${message}`;
            
            window.open(url, '_blank');
        }


        // --- Fungsi Asli dari Website Anda (Loading screen, galeri, dll) ---
        // Disalin dari kode asli
        let progress = 0;
        document.addEventListener("DOMContentLoaded", () => {
            // Salin isi dari page-reguler asli ke dalam variabel untuk digunakan nanti
            const originalRegulerPage = document.getElementById('page-reguler').innerHTML;
            document.getElementById('page-reguler').setAttribute('data-original-content', originalRegulerPage);

            const loadingText = document.querySelector(".loading-text");
            const loadingFill = document.querySelector(".loading-fill");
            const loadingScreen = document.querySelector(".loading-screen");

            function updateLoading() {
                if (progress < 100) {
                    progress += Math.floor(Math.random() * 10) + 5;
                    if (progress > 100) progress = 100;
                    loadingFill.style.width = progress + "%";
                    loadingText.textContent = progress + "%";
                    setTimeout(updateLoading, Math.random() * 200);
                } else {
                    setTimeout(() => {
                        loadingScreen.style.display = "none";
                        showPage('page-home'); // Tampilkan halaman home setelah loading
                    }, 500);
                }
            }
            setTimeout(updateLoading, 500);
        });

        // Pastikan Anda juga memasukkan kembali fungsi galeri (fullscreen) jika masih diperlukan
    </script>
</body>
</html>

